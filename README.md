Документация по ПО «TaskLog»

Документация к базе данных
База данных спроектирована по инфологической модели на изображении 1, которая обеспечивает правильность и понятность будущей базы данных. 
 ![image](https://github.com/Derekovskyyy/TaskLog/assets/94841308/bc1ce4a5-a4dd-45a3-b4ce-73f0321ddfef)

Изображение 1 – Инфологическая модель базы данных
	По модели, база данных состоит из четырёх таблиц: 
1)	Tasks – хранит задачи и её компонент;
2)	EventLog – хранит информацию в виде журнала событий;
3)	Components – хранит данные о компоненте;
4)	Users – хранит фамилию, имя, почту и хешированный пароль пользователя.
Для подробного описания полей каждой таблицы можно рассмотреть словарь данных, представленный ниже. 
Справка по словарю данных:
1)	Key – обозначает является ли поле ключом, а если является, то каким: PK (Primary Key) – первичный ключ, или FK (Foreign Key) – внешний ключ;
2)	Name – показывает имя поля; 
3)	DataType – показывает тип данных поля;
4)	Required – если указано «Yes», то поле должно быть обязательно заполненным. Если указано «No», то поле может хранить NULL;
5)	Uniqueness – если указано «Yes», то поле является уникальным;
6)	Linkage – указывает с какой таблицей базы данных связано поле;
7)	Notes – описание поля. Identy означает, что поле является идентификатором - числовым значением, которое автоматически выставляется по порядку возрастания при создании нового поля.
Таблица User
Key	Name	DataType	Required	Uniqueness	Linkage	Notes
PK	USER_ID	bigint	Yes	Yes	Tasks, EventLog 	Identy
	USER_NAME	nvarchar(50)	Yes	No		Фамилия и имя
	USER_EMAIL	nvarchar(50)	Yes	Yes		Почта
	HASHED_PASS	nvarchar(68)	Yes	No		Хешированный пароль

Таблица Components
Key	Name	DataType	Required	Uniqueness	Linkage	Notes
PK	COMP_ID	bigint	Yes	Yes	Tasks	Identy
	COMP_OEM_ID	nvarchar(50)	No	No		Номер компонента
	COMP_OEM_VER	nvarchar(50)	No	No		Версия компонента
	COMP_OEM_NAME	nvarchar(50)	Yes	No		Имя компонента
	SW_VER	nvarchar(50)	No	No		Прошивка – ПО, поддерживаемое компонентом

Таблица Tasks
Key	Name	DataType	Required	Uniqueness	Linkage	Notes
PK	TASK_ID	bigint	Yes	Yes	EventLog	Identy
FK	COMP_ID	bigint	Yes	No	Components	ID компонента
	TASK_DESCR	nvarchar(512)	Yes	No		Описание задачи
	COMP_SN	nvarchar(50)	Yes	No		Серийный номер копонента
FK	USER_ID	bigint	Yes	No	Users	ID создателя задачи
	COMMENTS	nvarchar(512)	No	No		

Таблица EventLog
Key	Name	DataType	Required	Uniqueness	Linkage	Notes
PK	EVENT_ID	bigint	Yes	Yes		Identy
FK	EVENT_TYPE	nvarchar(50)	Yes	No		Статус задачи: «Создано», «В работе», «Ожидает запчастей», «Завершено»
	EVENT_TIMESTAMP	datetime	Yes	No		Время создания задачи
	TASK_ID	bigint	Yes	No	Tasks	ID задачи
FK	USER_ID	bigint	Yes	No	Users	ID пользователя, который поменял статус или комментарий задачи

Связи:
1)	Связь 1:М между таблицами User (поле USER_ID) и Tasks (поле USER_ID). Указывает в задаче, какой пользователь создал задачу;
2)	Связь 1:М между таблицами User (поле USER_ID) и EventLog (поле USER_ID). Указывает в журнале событий, какой пользователь изменил статус или комментарий задачи;
3)	Связь 1:М между таблицами Components (поле COMP_ID) и Tasks (поле COMP_ID). Указывает в задаче, какой компонент ремонтируется;
4)	Связь 1:М между таблицами Tasks (поле TASK_ID) и EventLog (поле TASK_ID). Указывает в журнале событий, какая задача относится к событию.
По вышеуказанным данным спроектирована база данных, с диаграммой которой можно ознакомиться на изображении 2.
 
Изображение 2 – Диаграмма базы данных
Документация к развертыванию ПО
	Чтобы была возможность подключиться к базе данных с помощью сервера необходимо выполнить следующие шаги:
1)	Включаем необходимые протоколы для работы сервера MicrosoftSQL:
Зайти в SQL Server Configuration Manager => Открыть список вкладок в пункте «Сетевая конфигурация SQL Server» => Открыть «Протоколы для MSSQLSERVER» => Включить протокол «TCP/IP» => Перейти на вкладку «Службы SQL Server» => Перезапустить службу «SQL SERVER (MSSQLSERVER)» => Включить службу «Агент SQL SERVER (MSSQLSERVER)» => Перезапустить службу «SQL SERVER (MSSQLSERVER)»;
2)	Создаём правило, которое позволит использовать протокол TCP/IP:
Зайти в Брандмауэр Защитника Windows => Зайти на вкладку «Дополнительные параметры» => Зайти на вкладку «Правила для входящих подключений» => Справа в действиях нажать на «Создать правило…» => В новом окне выбрать «Для порта» => Нажать «Далее» => Выбрать «Протокол TCP» => Выбрать «Определённые локальные порта», в текстовое поле ввести «1433» => Нажать «Далее» => Выбрать «Разрешить подключение» => Выбрать «Доменный», «Частный» и «Публичный» => Нажать «Далее» => Вписать имя правила и по желанию его описание => Нажать «Готово»;
3)	Регистрируем сервер: 
Зайти в Microsoft SQL Server Management Studio => Произвести соединение с сервером => Нажать на имя своего сервера правой мышкой в панели справа => Нажать «Зарегистрировать…» => В проверке подлинности выбрать «Проверка подлинности SQL Server» => Вписываем имя сервера и пароль => В имени зарегистрированного сервера вписать 	
В панели справа раскрыть папку «Безопасность» => Правым кликом мышки нажать на «Имена для входа» и нажать на «Создать имя для входа» => Вписать имя для входа => Выбрать «Проверка подлинности SQL Server» => Вписать пароль и подтвердить его => Перейти на вкладку «Роли сервера» => Выбрать все роли => Перейти на вкладку «Сопоставление пользователей» => Выбрать базы данных, которые будут доступны при подключении к серверу => Вписываем имя для входа в поля пользователя у выбранных баз данных => Снизу выбираем все членства в роли для каждой базы данных => Нажимаем «Ок»;
4)	Подключаемся к созданному серверу:
Заново подключить соединение с сервером, выбрав в проверке подлинности «Проверка подлинности SQL Server» => В имени для входа вписать имя для входа (созданное в пункте 4) => В поле для пароля вписать пароль от имени для входа (созданный в пункте 4);
5)	Подключаем программу к серверу: 
Открыть конфигурационный файл программы под названием «dataSource.json» в папке «dataSource» => В значение для ключа «DataSource» вписать ID сервера => В значение для ключа «UserID» вписать имя для подключения => В значение для ключа «Password» вписать пароль для имени подключения. Пример конфигурационного файла: 
{
"DataSource": "10.2.105.104",
"UserID": "User",
"Password": "1111"
}
6)	В случае ошибки подключения к базе данных, как на изображении X, следует:
Зайти в Брандмауэр Защитника Windows => Зайти на вкладку «Изменение параметров уведомлений» => 	В параметрах для частной сети выбрать «Отключить брандмауэр Защитника Windows» => В параметрах для общественной сети выбрать «Отключить брандмауэр Защитника Windows».
 
Изображение XXX – Ошибка подключения к базе данных


